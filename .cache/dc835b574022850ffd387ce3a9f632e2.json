{"dependencies":[{"name":"crypto","loc":{"line":6,"column":21}},{"name":"readable-stream","loc":{"line":7,"column":23}},{"name":"data-uri-to-buffer","loc":{"line":8,"column":30}},{"name":"./notmodified","loc":{"line":9,"column":31}},{"name":"debug","loc":{"line":10,"column":20}}],"generated":{"js":"\n/**\n * Module dependencies.\n */\n\nvar crypto = require('crypto');\nvar Readable = require('readable-stream');;\nvar dataUriToBuffer = require('data-uri-to-buffer');\nvar NotModifiedError = require('./notmodified');\nvar debug = require('debug')('get-uri:data');\n\n/**\n * Module exports.\n */\n\nmodule.exports = get;\n\n/**\n * Returns a Readable stream from a \"data:\" URI.\n *\n * @api protected\n */\n\nfunction get (parsed, opts, fn) {\n  var uri = parsed.href;\n  var cache = opts.cache;\n\n  // need to create a SHA1 hash of the URI string, for cacheability checks\n  // in future `getUri()` calls with the same data URI passed in.\n  var shasum = crypto.createHash('sha1');\n  shasum.update(uri);\n  var hash = shasum.digest('hex');\n  debug('generated SHA1 hash for \"data:\" URI: %o', hash);\n\n  // check if the cache is the same \"data:\" URI that was previously passed in.\n  if (cache && cache.hash == hash) {\n    debug('got matching cache SHA1 hash: %o', hash);\n    fn(new NotModifiedError());\n  } else {\n    debug('creating Readable stream from \"data:\" URI buffer');\n    var buf = dataUriToBuffer(uri, opts);\n    var rs = new Readable();\n    rs._read = read(buf);\n    buf = null;\n    rs.hash = hash;\n    fn(null, rs);\n  }\n}\n\n/**\n * Function that returns a Readable `_read` function implementation.\n *\n * @api private\n */\n\nfunction read (buf) {\n  return function (n) {\n    this.push(buf);\n    this.push(null);\n    buf = null;\n  };\n}\n","map":{"mappings":[{"source":"../node_modules/get-uri/data.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../node_modules/get-uri/data.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}}],"sources":{"../node_modules/get-uri/data.js":"\n/**\n * Module dependencies.\n */\n\nvar crypto = require('crypto');\nvar Readable = require('readable-stream');;\nvar dataUriToBuffer = require('data-uri-to-buffer');\nvar NotModifiedError = require('./notmodified');\nvar debug = require('debug')('get-uri:data');\n\n/**\n * Module exports.\n */\n\nmodule.exports = get;\n\n/**\n * Returns a Readable stream from a \"data:\" URI.\n *\n * @api protected\n */\n\nfunction get (parsed, opts, fn) {\n  var uri = parsed.href;\n  var cache = opts.cache;\n\n  // need to create a SHA1 hash of the URI string, for cacheability checks\n  // in future `getUri()` calls with the same data URI passed in.\n  var shasum = crypto.createHash('sha1');\n  shasum.update(uri);\n  var hash = shasum.digest('hex');\n  debug('generated SHA1 hash for \"data:\" URI: %o', hash);\n\n  // check if the cache is the same \"data:\" URI that was previously passed in.\n  if (cache && cache.hash == hash) {\n    debug('got matching cache SHA1 hash: %o', hash);\n    fn(new NotModifiedError());\n  } else {\n    debug('creating Readable stream from \"data:\" URI buffer');\n    var buf = dataUriToBuffer(uri, opts);\n    var rs = new Readable();\n    rs._read = read(buf);\n    buf = null;\n    rs.hash = hash;\n    fn(null, rs);\n  }\n}\n\n/**\n * Function that returns a Readable `_read` function implementation.\n *\n * @api private\n */\n\nfunction read (buf) {\n  return function (n) {\n    this.push(buf);\n    this.push(null);\n    buf = null;\n  };\n}\n"},"lineCount":63}},"hash":"409662c860956081119d73a955336779","cacheData":{"env":{}}}