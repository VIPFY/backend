export default (sequelize, { TEXT, BOOLEAN, INTEGER, ARRAY }) => {
  const DepartmentEmail = sequelize.define("department_all_emails_view", {
    email: { type: TEXT, allowNull: false },
    verified: BOOLEAN,
    autogenerated: BOOLEAN,
    description: TEXT,
    priority: INTEGER,
    tags: {
      type: ARRAY(TEXT),
      set(val) {
        this.setDataValue("tags", val.toLowerCase());
      }
    }
  });

  DepartmentEmail.associate = ({ Unit }) => {
    DepartmentEmail.belongsTo(Unit, { foreignKey: "departmentid" });
    DepartmentEmail.belongsTo(Unit, { foreignKey: "emailownerid" });
  };

  DepartmentEmail.removeAttribute("id");

  return DepartmentEmail;
};
